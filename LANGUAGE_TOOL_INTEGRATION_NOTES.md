# LanguageTool Integration Notes

This project now uses `language_tool_python` for advanced grammar and spell checking of order text lines.

## Key Information

### 1. New Dependency
- The library `language_tool_python` has been added to the project. Please ensure it is installed. You can typically install dependencies using:
  `pip install -r requirements.txt`

### 2. Java Prerequisite
- **Crucial:** LanguageTool is a Java application. A **Java Runtime Environment (JRE) version 8 or higher** must be installed and accessible on any machine running these processors for the grammar checking to function.
- If Java is not found or is not the correct version, LanguageTool will fail to initialize, and the system will fall back to basic regex-based warnings.

### 3. Functionality
- The integration provides enhanced checking for spelling mistakes, grammatical errors, punctuation issues, and more, beyond the previous basic checks.
- These checks are applied to `LINE_1`, `LINE_2`, and `LINE_3` of the orders.

### 4. Warning Output
- Detailed warnings, including those from LanguageTool (prefixed with "LT:") and existing regex-based checks, are consolidated into the **'WARNINGS' column** of the batch CSV files generated by the processors.
- LanguageTool warnings include the rule ID, category, an error message, a suggestion (if available), and the specific text snippet that was flagged.

### 5. Fallback Mechanism
- If `language_tool_python` fails to initialize or encounters an error during its operation (e.g., Java issues, resource limitations), a warning message will be printed to the console, and the system will proceed with only the basic built-in regex-based warnings. CSV generation will not be blocked.

### 6. LanguageTool Server Download
- The first time a feature using LanguageTool is run on a machine, the `language_tool_python` library will automatically download the LanguageTool server (a `.jar` file, approximately 200-250MB). This requires an internet connection for the initial setup.
- The server is typically cached in the user's home directory (e.g., `~/.cache/language_tool_python/`). Subsequent runs will use this cached server and will not require an internet connection for LanguageTool itself.

### 7. Performance Considerations
- Running the LanguageTool Java server can be resource-intensive, especially on machines without dedicated GPUs or with limited RAM. While the integration attempts to manage resources efficiently (e.g., initializing the tool once per batch), performance should be monitored in the actual operating environment. The system's fallback mechanism is designed to provide resilience.
